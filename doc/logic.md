# 全部查询接口的基本逻辑说明
***

## 模块一
    > 简单说明一下,模块一是指建筑项目查询界面的除直接精准查询企业名称的查询之外的查询
### 项目相关
##### 项目-数量-单查
1. 处理参数，将项目参数分为4类（招投标、合同备案、施工许可、竣工验收）
根据5类参数，如果选择了哪类中的一个，则为该类打上标签 = 1;
2. 仅仅对此查询，兼容到 keywords_contract_scale（关键字：合同面积）参数，
 如果有，则contract = 1 不使用公用方法进行处理的原因是，会影响到详情;
3. 根据参数组成SQL，SQL的逻辑是选了哪类参数就 join 哪类，没有选则不join，
全选、全不选都全部join
4. 此处拼接SQL时，对于关键字多一个逻辑，同时具备两个关键字，则or连接并and其他条件，
只有一个关键字则直接and
5. 查询到project_url数组后,之后处理成string，去com_pro表查询company_url
6. 去重，重新排列，去除None，count计算之后输出

##### 项目-详情-单查
1. 处理参数，将项目参数分为4类（招投标、合同备案、施工许可、竣工验收）
根据5类参数，如果选择了哪类中的一个，则为该类打上标签 = 1;
2. 判断连表 此处由于有4个不同的项目子项的选择，
   而且根据不同的连接顺序，连表的 on 条件不同，
   则使用判断来分开，
   有筛选项则用 join 没有选的就用left join ，
   这样可以保证没有选的 不会被连表条件所影响，
   全选和全不选 使用全 join
3. 拼接SQL，对于关键字多一个逻辑，同时具备两个关键字，则or连接并and其他条件，
只有一个关键字则直接and
4. project 作为主表 连接4张子表进行查询出需要的字段
5. 并用同样的连接和条件 计算 count(*) 计算总项目数量
6. 返回数据

### 企业相关

### 人员相关

## 模块二